syntax = "proto3";
//  Assumption 1 - each rpc has userId of caller
option java_multiple_files = true;
package fitt.vava.server;

message ErrorResponse {
  string message = 1;
}

service Auth {
  //  rpc register(registerRequest) returns (registerRespon)
  //  rpc login(loginRequest) returns (logitResponse)
}

message UserAvailability {
  UserStatus status = 1;
  string note = 2;
}

message LoginResponse {
  oneof response {
    UserAvailability data = 1;
    ErrorResponse error = 2;
  }
}

message LoginUserRequest {
  string email = 1;
  string password = 2;
}

enum UserStatus {
  PENDING = 0;
  APPROVED = 1;
  REJECTED = 2;
}

message RegisterClientRequest {
  string email = 1;
  string password = 2;
  string firstName = 3;
  string lastName = 4;
  string dateOfBirth = 5;
  string regionInNewCountry = 6;
  string country = 7;
}

message ClientChangeStatusRequest {
  UserStatus newStatus = 1;
}

message CreateCoworkerRequest {
  string name = 1;
  repeated string preferredCountries = 2;
}

service UserService {
  rpc login(LoginUserRequest) returns (LoginResponse);

  rpc registerClient(RegisterClientRequest) returns (LoginResponse);
  rpc changeClientStatus(ClientChangeStatusRequest) returns (LoginResponse);

  rpc createCoworker(CreateCoworkerRequest) returns (LoginResponse);
  rpc updateCoworker(CreateCoworkerRequest) returns (LoginResponse);

//  rpc getAllCoworkers(getAllCoworkersRequest) returns (getAllCoworkersResponse
//  rpc getAllClients()
}